\documentclass{article}
\usepackage{quad}

\hypersetup{pdftitle={Trees meet octahedron comparison},
pdfauthor={Nina Lebedeva and Anton Petrunin}}

\newcommand{\Addresses}{{\bigskip\footnotesize

\noindent Nina Lebedeva,
\par\nopagebreak
 \textsc{Saint Petersburg State University, 7/9 Universitetskaya nab., St. Petersburg, 199034, Russia}
\par
\nopagebreak
 \textsc{St. Petersburg Department of V.A. Steklov Institute of Mathematics of the Russian Academy of Sciences, 27 Fontanka nab., St. Petersburg, 191023, Russia}
  \par\nopagebreak
  \textit{Email}: \texttt{lebed@pdmi.ras.ru}

\medskip

\noindent   Anton Petrunin, 
\par\nopagebreak
 \textsc{Math. Dept. PSU, University Park, PA 16802, USA.}
  \par\nopagebreak
  \textit{Email}: \texttt{petrunin@math.psu.edu}
  
}}

\begin{document}
%\pagestyle{empty}\renewcommand\includegraphics[2][{}]{}


\title{Trees meet octahedron comparison}
\author{Nina Lebedeva and Anton Petrunin}

\date{}
\maketitle
\begin{abstract}
We show that trees and their products meet octahedron comparison.
\end{abstract}


Let us recall the notion of graph comparison introduced in \cite{lebedeva-petrunin-zolotov}.

Suppose $\Gamma$ is a graph with vertices $v_1,\dots,v_n$.
A metric space $X$ meets the \emph{$\Gamma$-comparison} if for any set of points in $X$ labeled by vertices of $\Gamma$ there is a model configuration $\tilde v_1,\dots,\tilde v_n$ in the Hilbert space $\HH$ such that 
if $v_j$ is adjacent to $v_j$, then
\[|\tilde v_i-\tilde v_j|_{\HH}\le | v_i-v_j|_{X}\]
and
if $v_j$ is nonadjacent to $v_j$, then
\[|\tilde v_i-\tilde v_j|_{\HH}\ge | v_i-v_j|_{X};\]
here $|p-q|_M$ denotes the distance between points $p$ and $q$ in the metric space~$M$.

\begin{wrapfigure}{r}{35 mm}
\vskip-2mm
\centering
\includegraphics{mppics/pic-30}
\end{wrapfigure}

Let us denote by $O_3$ the graph of the octahedron.
For the labeling shown on the diagram, $O_3$-comparison means that any six-point configuration $x,x',y,y',z,z'\in X$ can be mapped to $\HH$ so that the diagonals $xx'$, $yy'$, and $zz'$ are not getting shorter
and the edges are not getting longer.

Note that the 4-cycle $C_4$ is an induced subgraph of $O_3$.
Therefore, \textit{$O_3$-comparison implies $C_4$-comparison};
the latter is one of equivalent ways to describe the $\CAT(0)$-comparison.
In general, $C_4$-comparison does not imply $O_3$-comparison,
but the following question remains open.
It is motivated by questions posed by Michael Gromov \cite[1.19$_+(e)$]{gromov}.

\begin{thm}{Question}
Is it true that $O_3$-comparison holds in any complete length $\CAT(0)$ space?
\end{thm}

This question is the main motivation for the our note.
An affirmative answer should lead to a classification of six-point spaces that admit an isometric embedding in a complete length $\CAT(0)$ space.
On the other hand, an example would mean that $O_3$-comparison is something new,
so both answers to the question are interesting.

\begin{thm}{Theorem}
The $O_3$-comparison holds in products of metric trees.
\end{thm}

Let us list three most related results.
\begin{itemize}
\item The so-called \emph{(4+2)-point comparison} is another 6-point comparison which is weaker than $O_3$-comparison.
It holds in any complete length $\CAT(0)$ space;
the later was proved by Stpephanie Alexander, Vitali Kapovitch and the second author \cite{AKP-Kirszbraun,alexander2019alexandrov}.
\item \textit{If a 5-point space satisfies $C_4$-comparison, then it is to a subset in a complete length $\CAT(0)$ space}.
This result was proved by Tetsu Toyoda \cite{toyoda};
another proof was obtained by the authors \cite{lebedeva-petrunin}.
\item \textit{$C_4$-comparison implies $C_n$-comparison for any $n$},
here $C_n$ denotes the $n$-cycle and the intrinsic metric is not required.
This is another result of Tetsu Toyoda \cite{toyoda2019}.
\end{itemize}
For more related questions, see \cite{petrunin-2017,lebedeva-petrunin,lebedeva-petrunin-zolotov,lebedeva,lebedeva-petrunin-CBB, noar} and the references therein.

\parit{Proof.}
First, let us show that \textit{$O_3$-comparison holds for any metric tree $T$.}

Consider a six-point configuration $x,y,z,x',y',z'$ in a tree labeled by the vertices of $O_3$ on the diagram.
We can assume that the union of geodesics $[xx']$, $[yy']$, and $[zz']$ is connected.
Indeed, suppose $[xx']$ does not intersect $[yy']$, and $[zz']$.
Then we can shrink to a point a geodesic $\gamma$ that minimizes the distance from $[xx']$ to $[yy']\cup[zz']$;
in the obtained tree $T'$ the distances $|x-x'|$, $|y-y'|$ and $|z-z'|$ remain the same and the remaining distances between $x,y,z,x',y',z'$ cannot get longer, so any model configuration for the six points in $T'$ works for the original configuration in $T$.

Let 
\[Y=([xx']\cap [yy'])\cup([yy']\cap [zz'])\cup([zz']\cap [xx']).\]
Note that we are in one of the following two cases:
\begin{enumerate}
\item The set $Y$ is a \emph{tripod}; that is, $Y$ is a union of three geodesics meeting at one point, say $o$.
\item $Y$ lies in one of the  geodesics $[xx']$, $[yy']$, or $[zz']$.
\end{enumerate}

\parit{Case 1.}
Without loss of generality, we may assume that geodesics $[xx']$, $[yy']$, and $[zz']$ have opposite orientations on the overlaps.

Note that we can assume that in each pair $([ox],[oy'])$, $([oy],[oz'])$, and $([oz],[ox'])$ one of the geodesics lies in the other.
Indeed, assume it is not true, say $[ox]\not\subset[oy']$ and $|o-x|_T\le |o-y'|_T$.
Then moving $x$ to a point on $[oy']$ on the distance $|o-x|_T$ from $o$ will decrease the distance $|x-y'|_T$ and the remaining fourteen distances between $x,y,z,x',y',z'$ remain the same.
Therefore any model configuration for the new position of $x$ works for the old position.

If $[ox]\subset [oy']$, then define $a=x$, otherwise $a=y'$.
Similarly, chose  $b$ from $y$ or $z'$ and $c$ from $z$ or $x'$.
Consider model triangle $[\tilde a\tilde b\tilde c]$ of $[abc]$.

\begin{figure}[ht!]
\centering
\includegraphics{mppics/pic-50}
\end{figure}

Note that $[ab]\subset [yy']$, $[bc]\subset [zz']$, and $[ac]\subset [xx']$.
Therefore we may choose points $\tilde x$, $\tilde x'$ on the line $\tilde a\tilde c$ so that the map $x\mapsto \tilde x$, $x'\mapsto \tilde x'$, $a\mapsto \tilde a$, $c\mapsto \tilde c$ is distance-preserving.
Similarly, we may choose $\tilde y$, $\tilde y'$ on the line $\tilde a\tilde b$ and $\tilde z$, $\tilde z'$ on the line $\tilde b\tilde c$.
A couple of possible configurations are shown on the diagram.

The triangle inequality implies that the obtained configuration meets the required conditions.

\parit{Case 2.}
Without loss of generality, we may assume that $Y\subset [xx']$.
Then $[yy']$ and $[zz']$ intersect $[xx']$ along two subsegments, possibly degenerate.
Without loss of generality, we may assume that geodesics $[xx']$, $[yy']$, and $[zz']$ are oriented the same way on their overlaps.

\begin{figure}[ht!]
\centering
\includegraphics{mppics/pic-60}
\end{figure}

In this case, the needed configuration $\tilde x,\tilde x',\tilde y,\tilde y',\tilde z,\tilde z'$ on a line $\RR$ can be described by the coordinates:
\begin{align*}
\tilde x'&=|x'-x|,
&
\tilde y'&=|y'-x|,
&
\tilde z'&=|z'-x|,
\\
\tilde x&=0,
&
\tilde y&=|y'-x|-|y'-y|,
&
\tilde z&=|z'-x|-|z'-z|.
\end{align*}
The triangle inequality implies that this configuration meets the conditions. 

\parit{Final step.}
It remains to show that $O_3$-comparison holds for a product of trees $\Pi\z=T_1\times \dots\times T_n$.
Any six-point configuration $x,y,z,x',y',z'\in \Pi$ can be described by $n$ six-point configurations $x_i$, $y_i$, $z_i$, $x'_i$, $y'_i$, $z'_i\in T_i$ for each $i$.
Choose a model configuration $\tilde x_i$, $\tilde y_i$, $\tilde z_i$, $\tilde x'_i$, $\tilde y'_i$, $\tilde z'_i\in \HH$ for each $i$.
Observe that the $n$-tuples $\tilde x=(\tilde x_1,\dots, \tilde x_n),\z\dots,\tilde z'=(\tilde z_1,\dots, \tilde z_n)$ in $\HH=\HH^{\times n}$ form a model configuration of $x,y,z,x',y',z'$.
\qeds

\parbf{Acknowledgments.}
We want to thank Alexander Lytchak for help. 

The first author was partially supported by the Russian Foundation for Basic Research grant 20-01-00070, the second author was partially supported by the National Science Foundation grant DMS-2005279.

{\sloppy
\printbibliography[heading=bibintoc]
\fussy
}

\Addresses
\end{document}

Mathematics Research Reports?
